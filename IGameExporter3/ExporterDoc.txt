Про новый экспортёр из 3D Studio Max.

   Добавленна скелетная анимация.
   Серьёзно уменьшен размер данных, занимаемых анимацией как в памяти 
компьютера, так и на жёстком диске.
   Ускоренна загрузка моделей.
   Нормали теперь экспортируются прямо из макса, а не рассчитываются
после, поэтому их можно редактировать любыс способом.
   Добавлены несколько новых понятий, нацеленных на увеличение скорости
отображения объектов и увеличение удобства работы как художников, так 
и программистов.
   Убранна возможность анизотропного скалирования (разный коэффициэнт
scale по разным осям). Теперь если нужен подобный эффект, его нужно 
добиватья посредством скелетной анимации.

БАГ неустранимый! (Точнее проблема с Максом) При редактировании геометрии 
в Editable Poly нормали не будут иметь корректное значение, если не заданны группы сглаживания,
даже если всё и смотрится хорошо.

БАГ! В случае скининга с Editable Poly путаются индексы костей. 
Можно в этом случае сделать Turn to Mesh ниже скининга.
БАГ! Будет исправлен только в версии к новому проекту - падает иногда, если Edit Poly стоит в стеке выше Skin

Основные термины.
1) Анимационная группа.
2) Анимационная цепочка.
3) Группы видимости.
4) Скелетная анимация.
5) Skin color & self-illumination texture
6) Камера
7) Эффекты
8) Бамп
9) Источники света
10) Не удаляемые при оптимизации ноды.
11) Трек видимости объекта.
12) Reflection
13) Цвета осей - раскрашены во вьюверке так же как и в Максе, но 
 			Красный - X,
			Зеленый - Y,
			Синий - Z
14) Анимация материала
15) У говорящей головы должна быть камера под названием Camera01 и источник света FDirect01
16) Материал.

17) Упрощенные модели (cSimply3dx)
18) Баг с направлением нормалей.
19) logic node bound
20) ЛОДы в других  файлах.

1. Анимационная группа.
    В предыдущей версии анимационные группы были жёстко привязаны к 
  иерархии объекта. В некоторых случаях из-за этого невозможно было 
  корректно развести объекты по анимационным группам.
    Теперь есть анимационные группы, в которые произвольным образом 
  можно добавлять объекты.
     Пример - лаборатория, у которой появляется анимированный объект,
  на следующем уровне апгрейда.

2. Анимационная цепочка.
    Понятие анимационной цепочки осталось без изменений.
  Есть название, начальный и конечный кадр.
  Добавленно время проигрывания анимационной цепочки.
    Флаг "Зацикленная цепочка анимации" нужен для того, чтобы 
  при интерполяции сплайнами начало и конец цепочки корректно 
  стыковались.
   
3. Группы видимости.
    Новое понятие, введённое для того, чтобы избежать отображения 
  ненужных объектов. Соттоит из отображаемых в этой группе объектов.
    Пример использования. Есть лаборатория, которая может апгрейдится.
  Соответственно на разных этапах апгрейда она выглядит сильно по разному.
  Художнику нужно будет указать, какие объекты видны на текущем этапе.
  А программисту выбрать соответствующую группу видимости.

  Если у объекта есть предопределённые группы видимости с окончаниями lod01,lod02,lod03 то 
  графический движок сам выбирает группу видимости в зависимости от расстояния до объекта.
  Окончания убираются из группы видимости. То есть если было mainlod01,mainlof02,mainlod03
  то внутри игры будет группа main.
  
  Теперь есть множества видимости, состоящии из групп видимости. Позволяют независимо управлять 
  видимостью разных объектов.
  

4. Скелетная анимация.
    Для неё нужно использовать модификатор Skin.
  Он должен находиться на верху стека.
  На вертекс может влиять от 1 до 4 костей.
  Но 4 кости работают существенно медленнее чем 1 или 2,
  и не поддерживаются старым железам (Geforce 2, Radeon 7500).
  Поэтому вопрос о максимальном количестве костей остаётся открытым (две или четыре?).
  
  Неточность - в данный момент кости отсеиваются по префиксу Bip.
    
5. Skin color & self-illumination texture
  Skin color - задаётся программистом в игре и определяет цвет игрока.
    Если в материале в закладке Maps задать в Filter Color такую же текстуру 
  как и в Diffuse Color, то к этому материалу будет применяться Skin color.
  Интенсивность зависит от яркости alpha в текстуре.
    Если в Filter Color задать другую текстуру, то красный цвет канал будет задавать Skin color, 
  лучше всего делать эту текстуру gray scale.
  
  Если в материале в закладке Maps задать в Self-Illumination, 
  то эти пиксели будут сами светиться. Соответствующим цветом в зависимости от 
  alpha канала. Это значит, что в темное время
  эти места не будут затемняться. На эти места не падают тени.
  
  Размеры текстур желательно делать олдинаковыми Diffuse Color, Filter Color и Self-Illumination.
  Opacity и Self-Illumination не совместимы.
  Bump и Self-Illumination не совместимы.
  Reflection и Self-Illumination не совместимы.
  
 Если есть проблемы с положением, размером, поворотом объекта, то:
  1) У объекта верхнего уровня сделать Reset Transform, Scale.
  2) Affect Pivot Only -> Align to World.
  
 Неприлинкованных объектов должно быть два - logic center и group center.
 _base_ - прилинкован к графическим объектам, должен содержать полигоны, и 
   является площадкой для установки здания.
 logic bound - прилинкован к логическим объектам, и указывает на размеры 
   объекта для логики. В текущий момент это должен быть Box.

 logic center необязателен. Есть второй вариант организации логического объекта.
   В нем логические объекты (с префиксом logic) прилинкованны к ветке group center.

 
6. Камера. Можно использовать камеру, но пока что нельзя задавать FOV ей, 
   а можно только перемещать. Камера должна быть прилинкована к group center.

7. Эффекты. Для любого объекта надо задать имя в формате 
effect: file_name effect_name
где file_name - название файла эффекта (без пути и расширения)

8. Бамп - сейчас если tga полностью черно белая, то она интерпретируется как карта высот.
   Если tga цветная, то интерпретируется как карта нормалей.
   Нормали можно генерировать в 3DS Max 7 (tangent space), 
   цвет за пределами моделей лучше делать синим.
   
   Дополнительно при Бампе можно высьавлять текстуру Specular color.
   В ней RGB - цвет спекулярного отражения. alpha - Glossiness (коэффициэнт при степени, минимум 0, максимум 50)

9. Источники света - только omni. Отображаются только ночью.
   В них используется Far attenuation: Start End и цвет.
   Есть БАГ: Если источник света отскалировать, то его размеры не изменятся.
   Цвет источника света анимируется.
   Если задать Projector Map то будет отображаться как спрайтик.
   Если Projector Map отсутствует, то это будет полноценный сферический источник света.

10. Не удаляемые при оптимизации ноды. 
      Так как некоторые ноды не нужны для отображения объекта, они удаляются.
      Если какая либо нода нужна для последующей програмной анимации, 
      ее нужно включить в список неудаляемых нод.

11. Трек видимости объекта.
      Влияет только на создание уничтожение встроенных эффектов (см. effect:)
      В других случаях (в том числе и в логическом объекте) можно использовать 
      по своему усмотрению.

12. При добавлении текстуры Reflection, получаются отражения.
       а) Если это простая текстура будет один вариант отражения.
       б) Если это cubemap текстура будет другой вариант отражения.
      Для этой текстуры действует параметр Amount в материала, в закладке Maps.
      Если текстура имеет название sky.dds, то вместо неё будет отражаться небо (если оно конечно есть )
      
   

14. Анимация материала.
      Можно анимировать текстуру, вставляя .avi файл, причем анимация не будет зависить от фазы, 
      а будет крутиться постоянно и зацикленно.
      
      Можно анимировать uv координаты, этот вариант анимации зависит от фазы и анимационной цепочки.
      Анимируется матрица трансформации, заданная посредством Offset,Tiling,Angle в параметрах материала.
      

16. Материал 
      Поддерживаются tga текстуры. 32 битные и 8 битные grayscale. 8 битные индексированные текстуры не поддерживаются.
      Размеры текстуры должны быть кратны степени двойки. Минимальный размер 4.  (4,8,16,32,64,128,256,512,1024)
      с Ambient=128, Diffuse=128, Specular=0 будет освещаться аналогично освещению мира.
      если выбрать тип материала - Phong, то модель не будет освещаться,
         тогда Diffuse и Specular не играют роли, остается только 
         Ambient=255 (незатемненная текстура)
      у Diffuse texture действуют галочки Tile. 
       Незатайленная текстура нужна например на деревях при удалении,
       чтобы по границе не видно было стыков.

      Extended Parameters->Advanced Transparency->Type - указывается режим блендинга полупрозрачных объектов.

      Альфа канал текстуры, выставленной в слот Displacement перемножается с альфой дифузной тексутры
      (UV Offset может быть анимирован) - сделано для неба. Если есть в объекте вторые UV координаты, 
      то используются они, если нет - используются первые UV координаты.

     Можно использовать несколько материалов на одну mesh.
     
     
17. Упрощенные модели (cSimply3dx)
    Это специальные модели, которые быстро выводятся, но расплатой за это является 
    значительное уменьшение количества разных параметров в модели.
      Эта модель должна иметь только один материал.
      Только одно множество видимости. Но! В разных группах видимости могут быть разные материалы.
      Она не поддерживает анимации. Но! Можно делать дополнительные ноды, которые будут анимироваться програмно.
      Поэтому после экспорта иерархтя будет одноуровневой. group center к которому прилинкованны дополнительные ноды.
      Флариков и источников света нет.
      
    О мусоре. У него нет дополнительных нод.
    О траве/деревьях - одна дополнительная нода для анимации ветром/движущимися юнитами.
      
18. При экспорте 3dsmax часто выдает неправильное направление нормали. Для этого берется 
	положение объекта в нулевой кадр и нормаль направляется в ту же сторону что и нормаль треугольников,
	прилинкованных к этой точке.
    
19. logic node bound - к каждой логической node можно прилинковать по одному logic node bound, которые потом будут видны в логическом объекте.

20. Существует возможность экспортировать ЛОДы из других max файлов. Экспортировать ЛОДы можно только после
	того как сэкспортированна моделька. Там сейчас очень большие ограничения на материалы и иерархию node. Они должны быть такими же как и в основной сцене.